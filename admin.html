<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Resume Admin</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-white p-10">
<h1 class="text-2xl font-bold mb-4">Edit Resume</h1>
<textarea id="editor" class="w-full h-[400px] bg-slate-800 p-4 rounded"></textarea>
<button onclick="save()" class="mt-4 bg-blue-600 px-6 py-2 rounded hover:bg-blue-500">Save Resume</button>
<script>
  const API = "https://arun-ai-backend.vercel.app/api/resume";

  async function load() {
    try {
      const res = await fetch(API);
      if (!res.ok) {
        throw new Error("API returned status " + res.status);
      }

      const data = await res.json();
      document.getElementById("editor").value =
        JSON.stringify(data, null, 2);
    } catch (err) {
      document.getElementById("editor").value =
        "ERROR LOADING RESUME:\n\n" + err.message;
      console.error(err);
    }
  }

  async function save() {
    try {
      const text = document.getElementById("editor").value;

      const res = await fetch(API, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: text
      });

      if (!res.ok) {
        throw new Error("Save failed with status " + res.status);
      }

      alert("Resume updated successfully");
    } catch (err) {
      alert("SAVE ERROR: " + err.message);
      console.error(err);
    }
  }

  load();
</script>

</body>
</html>
